{
  "doc": " Contains an active set of storage nodes. The active set is a smart collection\n that only stores up to a 1000 nodes. The active set tracks the total amount of staked\n WAL to make the calculation of the rewards and voting power distribution easier.",
  "immediate_dependencies": [
    {
      "address": "0000000000000000000000000000000000000000000000000000000000000001",
      "name": "option"
    },
    {
      "address": "0000000000000000000000000000000000000000000000000000000000000001",
      "name": "vector"
    },
    {
      "address": "0000000000000000000000000000000000000000000000000000000000000002",
      "name": "object"
    }
  ],
  "attributes": [],
  "functions": {
    "new": {
      "source_index": 0,
      "index": 0,
      "doc": " Creates a new active set with the given `size` and `threshold_stake`. The\n latter is used to filter out storage nodes that do not have enough staked\n WAL to be included in the active set initially.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "max_size",
          "type_": "u16"
        },
        {
          "name": "threshold_stake",
          "type_": "u64"
        }
      ],
      "return_": [
        {
          "Datatype": {
            "module": {
              "address": "0000000000000000000000000000000000000000000000000000000000000000",
              "name": "active_set"
            },
            "name": "ActiveSet",
            "type_arguments": []
          }
        }
      ]
    },
    "insert_or_update": {
      "source_index": 1,
      "index": 1,
      "doc": " Inserts the node if it is not already in the active set, otherwise updates its stake.\n If the node's stake is below the threshold value, it is removed from the set.\n Returns true if the node is in the set after the operation, false otherwise.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "node_id",
          "type_": {
            "Datatype": {
              "module": {
                "address": "0000000000000000000000000000000000000000000000000000000000000002",
                "name": "object"
              },
              "name": "ID",
              "type_arguments": []
            }
          }
        },
        {
          "name": "staked_amount",
          "type_": "u64"
        }
      ],
      "return_": [
        "bool"
      ]
    },
    "update": {
      "source_index": 2,
      "index": 2,
      "doc": " Updates the staked amount of the storage node with the given `node_id` in\n the active set. Returns true if the node is in the set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "node_id",
          "type_": {
            "Datatype": {
              "module": {
                "address": "0000000000000000000000000000000000000000000000000000000000000002",
                "name": "object"
              },
              "name": "ID",
              "type_arguments": []
            }
          }
        },
        {
          "name": "staked_amount",
          "type_": "u64"
        }
      ],
      "return_": [
        "bool"
      ]
    },
    "insert": {
      "source_index": 3,
      "index": 3,
      "doc": " Inserts a storage node with the given `node_id` and `staked_amount` into the\n active set. The node is only added if it has enough staked WAL to be included\n in the active set. If the active set is full, the node with the smallest\n staked WAL is removed to make space for the new node.\n Returns true if the node was inserted, false otherwise.",
      "attributes": [],
      "visibility": "Private",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "node_id",
          "type_": {
            "Datatype": {
              "module": {
                "address": "0000000000000000000000000000000000000000000000000000000000000002",
                "name": "object"
              },
              "name": "ID",
              "type_arguments": []
            }
          }
        },
        {
          "name": "staked_amount",
          "type_": "u64"
        }
      ],
      "return_": [
        "bool"
      ]
    },
    "remove": {
      "source_index": 4,
      "index": 4,
      "doc": " Removes the storage node with the given `node_id` from the active set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              true,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        },
        {
          "name": "node_id",
          "type_": {
            "Datatype": {
              "module": {
                "address": "0000000000000000000000000000000000000000000000000000000000000002",
                "name": "object"
              },
              "name": "ID",
              "type_arguments": []
            }
          }
        }
      ],
      "return_": []
    },
    "max_size": {
      "source_index": 5,
      "index": 5,
      "doc": " The maximum size of the active set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u16"
      ]
    },
    "size": {
      "source_index": 6,
      "index": 6,
      "doc": " The current size of the active set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u16"
      ]
    },
    "active_ids": {
      "source_index": 7,
      "index": 7,
      "doc": " The IDs of the nodes in the active set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        {
          "vector": {
            "Datatype": {
              "module": {
                "address": "0000000000000000000000000000000000000000000000000000000000000002",
                "name": "object"
              },
              "name": "ID",
              "type_arguments": []
            }
          }
        }
      ]
    },
    "active_ids_and_stake": {
      "source_index": 8,
      "index": 8,
      "doc": " The IDs and stake of the nodes in the active set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        {
          "vector": {
            "Datatype": {
              "module": {
                "address": "0000000000000000000000000000000000000000000000000000000000000002",
                "name": "object"
              },
              "name": "ID",
              "type_arguments": []
            }
          }
        },
        {
          "vector": "u64"
        }
      ]
    },
    "threshold_stake": {
      "source_index": 9,
      "index": 9,
      "doc": " The minimum amount of staked WAL in the active set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u64"
      ]
    },
    "total_stake": {
      "source_index": 10,
      "index": 10,
      "doc": " The total amount of staked WAL in the active set.",
      "attributes": [],
      "visibility": "Package",
      "entry": false,
      "type_parameters": [],
      "parameters": [
        {
          "name": "set",
          "type_": {
            "Reference": [
              false,
              {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSet",
                  "type_arguments": []
                }
              }
            ]
          }
        }
      ],
      "return_": [
        "u64"
      ]
    }
  },
  "structs": {
    "ActiveSetEntry": {
      "index": 0,
      "doc": null,
      "attributes": [],
      "abilities": [
        "Copy",
        "Drop",
        "Store"
      ],
      "type_parameters": [],
      "fields": {
        "positional_fields": false,
        "fields": {
          "node_id": {
            "index": 0,
            "doc": null,
            "type_": {
              "Datatype": {
                "module": {
                  "address": "0000000000000000000000000000000000000000000000000000000000000002",
                  "name": "object"
                },
                "name": "ID",
                "type_arguments": []
              }
            }
          },
          "staked_amount": {
            "index": 1,
            "doc": null,
            "type_": "u64"
          }
        }
      }
    },
    "ActiveSet": {
      "index": 1,
      "doc": " The active set of storage nodes, a smart collection that only stores up\n to a 1000 nodes.\n Additionally, the active set tracks the total amount of staked WAL to make\n the calculation of the rewards and voting power distribution easier.",
      "attributes": [],
      "abilities": [
        "Copy",
        "Drop",
        "Store"
      ],
      "type_parameters": [],
      "fields": {
        "positional_fields": false,
        "fields": {
          "max_size": {
            "index": 0,
            "doc": " The maximum number of storage nodes in the active set.\n Potentially remove this field.",
            "type_": "u16"
          },
          "threshold_stake": {
            "index": 1,
            "doc": " The minimum amount of staked WAL needed to enter the active set. This is used to\n determine if a storage node can be added to the active set.",
            "type_": "u64"
          },
          "nodes": {
            "index": 2,
            "doc": " The list of storage nodes in the active set and their stake.",
            "type_": {
              "vector": {
                "Datatype": {
                  "module": {
                    "address": "0000000000000000000000000000000000000000000000000000000000000000",
                    "name": "active_set"
                  },
                  "name": "ActiveSetEntry",
                  "type_arguments": []
                }
              }
            }
          },
          "total_stake": {
            "index": 3,
            "doc": " The total amount of staked WAL in the active set.",
            "type_": "u64"
          }
        }
      }
    }
  },
  "enums": {}
}